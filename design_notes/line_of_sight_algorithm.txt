What is line of sight for my game?
----------------------------------

Line of sight, for a given position on a map, is defined as:
- The set of positions adjacent to that position that are not
  obstructed by blocking entities or terrain.
- This can optionally be limited by a maximum distance from the
  first position.
- Otherwise, it is limited by when an EMPTY, WALL, or a BLOCKING entity
  is encountered.

What is the algorithm's design?

Set<Position2D> lineOfSight(Position2D start, int range) {
    (breadth-first-search queue)
    for each immediately neighboring position,
        is the neighbor within range?
        if you draw a line from the center of start to the center of the neighbor,
        does the line pass through any obstructed positions?
        if visible,
            add to visible set, and the search queue.
        if obstructed,
            add to obstructed set.

    repeat above algorithm on the search queue, until the search queue is empty.
}